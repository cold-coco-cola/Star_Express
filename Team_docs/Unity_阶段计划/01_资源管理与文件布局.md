# Unity 阶段计划 — 01：资源管理与文件布局

> 依据 [技术文档_星穹铁道_Unity.md](../技术文档_星穹铁道_Unity.md) §2.2、§14、[PRD_星穹铁道.md](../PRD_星穹铁道.md) 编写。  
> **目的**：建立统一资源目录与命名规范，便于后续场景、Prefab、脚本、配置与美术按模块落地。  
> **执行者**：任意负责「项目结构」或「资源管理」的成员；执行后可供 A/B/C 分工直接使用。  
> **索引**：[00_索引与文件管理](./00_索引与文件管理.md)。

---

## 1. 目标与原则

### 1.1 目标

- **完善资源管理**：所有项目资源归入 `Assets/Game/` 下，按类型与模块分子目录，避免与第三方（如 UOSLauncherEncrypt）、默认 Sample 混放。
- **建立合适文件布局**：与技术文档 §2.2、§14.3 一致，便于查找、扩展与协作。

### 1.2 原则

- **项目资源一律在 `_Project` 下**：场景、Prefab、脚本、ScriptableObject、配置、美术等。
- **不动第三方与 Unity 自带**：保留 `Assets/Scenes`、`Assets/UOSLauncherEncrypt` 等现有内容；游戏场景新建在 `_Project/Scenes`。
- **预留扩展**：Animations、Materials、Config 等可先建空目录或占位文件，后续按需添加。

### 1.3 场景放置与 Config/JSON 约定（统一约定，便于操作）

**场景放置**

- **所有正式关卡场景**一律放在 **`Assets/Game/场景/`** 下（如 `SolarSystem_01.unity`）。
- **好处**：与 Prefab、脚本、配置同属 `_Project`，打包、关卡选择、资源引用都只认一个根，操作简单。
- **Assets/Scenes**：保留不动，仅作 Unity 默认或临时测试；不用于正式关卡，避免「场景到底在哪儿」的混淆。

**Config 与 JSON**

- **首选**：关卡数据用 **ScriptableObject**（LevelConfig.asset）放在 **`_Project/ScriptableObjects/`**，在 Inspector 里编辑，无需关心加载路径。
- **若用 JSON**：所有关卡或全局配置的 JSON 文件放在 **`_Project/Config/`**；建议再建子目录 **`Config/Levels/`** 专放关卡 JSON（如 `solar_system_01.json`），便于和未来其他配置（如全局设置）区分。
- **加载方式**：SO 在代码中通过引用或 `Resources.Load` 等按项目约定加载；JSON 若需运行时读取，可由实现阶段决定用 `StreamingAssets` 或复制到 `Resources/Config` 再 `Resources.Load`，本阶段只约定「放在哪」，不约束具体 API。

---

## 2. 目标目录结构（做出什么样）

执行完成后，`Assets` 下应呈现如下结构（仅列出 _Project 及其子项；其余已有项保持不变）：

```
Assets/
├── _Project/
│   ├── Scenes/
│   │   └── （后续：SolarSystem_01.unity 等，所有正式关卡仅放此处）
│   ├── Prefabs/
│   │   ├── Station.prefab          （后续创建）
│   │   ├── Passenger.prefab
│   │   ├── Ship.prefab
│   │   ├── LineSegment.prefab      （可选）
│   │   └── UI/                     （资源栏、选色、结算等）
│   ├── Scripts/
│   │   ├── Core/
│   │   ├── Entities/
│   │   ├── Logic/
│   │   ├── Input/
│   │   └── UI/
│   ├── ScriptableObjects/
│   │   └── （LevelConfig, GameBalance, VisualConfig 等）
│   ├── Config/
│   │   └── Levels/                 （若用 JSON：solar_system_01.json 等）
│   └── Art/
│       ├── Sprites/Stations、Ships、Passengers、UI
│       ├── Animations/Station、Ship、Passenger
│       └── Materials/
├── Scenes/                         # 保留，仅测试用，不放正式关卡
│   └── SampleScene.unity
└── UOSLauncherEncrypt/
    └── …
```

---

## 3. 在 Unity 内的具体步骤与操作

### 步骤 1：创建根目录 _Project

1. 在 Project 窗口选中 `Assets`。
2. 右键 → **Create → Folder**，命名为：`_Project`。

### 步骤 2：在 _Project 下创建一级子目录

在 `Assets/Game` 下依次创建：`Scenes`、`Prefabs`、`Scripts`、`ScriptableObjects`、`Config`、`Art`。

### 步骤 3：Prefabs 与 Config 子目录

- 在 `Prefabs` 下创建子文件夹：`UI`。
- 在 `Config` 下创建子文件夹：`Levels`（用于关卡 JSON，若采用）。

### 步骤 4：Scripts 子目录

在 `Scripts` 下创建：`Core`、`Entities`、`Logic`、`Input`、`UI`。

### 步骤 5：Art 子目录

- 在 `Art` 下创建：`Sprites`、`Animations`、`Materials`。
- 在 `Sprites` 下创建：`Stations`、`Ships`、`Passengers`、`UI`。
- 在 `Animations` 下创建：`Station`、`Ship`、`Passenger`。

### 步骤 6：确认

- 展开 `_Project` 与上述子目录，与「目标目录结构」一致。
- 后续**所有正式关卡场景**保存到 `_Project/Scenes`；**Config/JSON** 放 `Config` 或 `Config/Levels`；**ScriptableObject** 放 `ScriptableObjects`。

---

## 4. 执行后自检清单

- [ ] 存在 `Assets/Game`，且含 Scenes、Prefabs、Prefabs/UI、Scripts（含 5 个子目录）、ScriptableObjects、Config、Config/Levels、Art 及 Art 下子目录。
- [ ] 未删除或移动 `Assets/Scenes`、`Assets/UOSLauncherEncrypt`。
- [ ] 新建文件夹均有 Unity 生成的 `.meta`（版本控制请一并提交）。

---

## 5. 与后续阶段的衔接

- **场景**：见 [02_场景与根节点](./02_场景与根节点.md)，在 `_Project/Scenes` 新建场景并建根节点。
- **Prefab**：见 [03_Prefab与组件](./03_Prefab与组件.md)。
- **脚本与 SO**：ScriptableObject 放 `ScriptableObjects`，脚本按职责放入 `Scripts` 对应子目录。

---

*文档结束。*
